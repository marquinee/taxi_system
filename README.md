# Система управления такси

Веб-приложение для управления службой такси, разработанное на Spring Boot. Система предоставляет функционал для управления пользователями, водителями, автомобилями, клиентами, заказами и тарифами.

## Технологии

- **Java** - язык программирования
- **Spring Boot** - фреймворк для разработки веб-приложений
- **Spring Security** - система аутентификации и авторизации
- **Spring Data JPA / Hibernate** - работа с базой данных через ORM
- **PostgreSQL** - реляционная база данных
- **Thymeleaf** - шаблонизатор для веб-интерфейса
- **HTML/CSS** - клиентская часть интерфейса
- **Chart.js** - библиотека для визуализации данных

## Функциональность

### Роли пользователей

#### Администратор
- Управление пользователями системы
- Управление водителями
- Управление автомобилями
- Управление тарифами
- Просмотр статистики по пользователям и водителям

#### Оператор
- Управление клиентами
- Управление заказами
- Просмотр автомобилей
- Просмотр тарифов
- Просмотр статистики по клиентам и заказам

#### Водитель
- Просмотр назначенных заказов
- Управление статусами заказов (начать/завершить)
- Просмотр персональной статистики

### Основные возможности

#### Поиск и сортировка
- Поиск записей по различным полям во всех таблицах
- Сортировка записей по алфавиту, дате, числовым значениям
- Комбинирование поиска и сортировки

#### Статистика
- Статистика для администратора: количество пользователей, водителей, средний стаж, среднее время выполнения заказов
- Статистика для оператора: количество клиентов, заказов, выручка, средняя стоимость заказа
- Индивидуальная статистика для водителя: количество заказов, заработок, среднее время выполнения

#### Обработка ошибок
- Страницы ошибок (404, 403, 500)
- Глобальная обработка исключений
- Валидация форм с отображением ошибок
- Информативные сообщения об ошибках

## Установка и запуск

### Требования
- Java 17 или выше
- PostgreSQL 12 или выше
- Maven 3.6 или выше

### Настройка базы данных

1. Создайте базу данных PostgreSQL:
```sql
CREATE DATABASE taxi;
```

2. Настройте подключение в `src/main/resources/application.properties`:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/taxi
spring.datasource.username=your_username
spring.datasource.password=your_password
```

### Запуск приложения

1. Клонируйте репозиторий или распакуйте архив проекта

2. Откройте проект в IDE (IntelliJ IDEA, Eclipse и т.д.)

3. Убедитесь, что PostgreSQL запущен и база данных создана

4. Запустите приложение:
   - Через IDE: запустите класс `TaxiSystemApplication`
   - Через Maven: `mvn spring-boot:run`
   - Через командную строку: `java -jar target/taxi_system-0.0.1-SNAPSHOT.jar`

5. Откройте браузер и перейдите по адресу: `http://localhost:8080`

### Первоначальная настройка

После первого запуска приложения необходимо создать пользователя-администратора. Это можно сделать через SQL-скрипт или через интерфейс базы данных.

Пример SQL для создания администратора:
```sql
INSERT INTO users (username, password_hash, role) 
VALUES ('admin', '$2a$10$...', 'ADMIN');
```

Пароль должен быть захеширован с помощью BCrypt.

## Структура проекта

```
src/
├── main/
│   ├── java/com/example/taxi_system/
│   │   ├── config/          # Конфигурация Spring Security
│   │   ├── controller/      # Контроллеры (MVC)
│   │   ├── entity/          # Сущности JPA
│   │   ├── repository/      # Репозитории Spring Data JPA
│   │   ├── service/         # Бизнес-логика
│   │   └── TaxiSystemApplication.java
│   └── resources/
│       ├── static/css/      # CSS стили
│       ├── templates/       # Thymeleaf шаблоны
│       └── application.properties
└── test/                    # Тесты
```

## Использование

### Вход в систему

1. Откройте страницу входа: `http://localhost:8080/login`
2. Введите логин и пароль
3. После успешной авторизации вы будете перенаправлены на соответствующий дашборд

### Работа с данными

- **Добавление**: Нажмите кнопку "Добавить" на странице списка
- **Редактирование**: Нажмите "Редактировать" в строке нужной записи
- **Удаление**: Нажмите "Удалить" (для некоторых сущностей используется деактивация)
- **Поиск**: Введите текст в поле поиска и нажмите "Поиск"
- **Сортировка**: Выберите поле и направление сортировки из выпадающих списков

### Управление заказами (для оператора)

1. Создайте новый заказ, указав клиента и адреса
2. Назначьте водителя заказу
3. Отслеживайте статус заказа:
   - NEW - новый заказ
   - ASSIGNED - назначен водитель
   - IN_PROGRESS - поездка началась
   - COMPLETED - поездка завершена
   - CANCELLED - заказ отменен

### Управление заказами (для водителя)

1. Просмотрите назначенные заказы в разделе "Мои заказы"
2. Нажмите "Начать" для начала поездки
3. Нажмите "Завершить" после завершения поездки

## Особенности реализации

### Безопасность
- Ролевая модель доступа (ADMIN, OPERATOR, DRIVER)
- Хеширование паролей с помощью BCrypt
- Защита маршрутов на основе ролей

### Архитектура
- Многослойная архитектура (Controller-Service-Repository)
- Разделение бизнес-логики и представления
- Использование паттернов проектирования

### Интерфейс
- Адаптивный дизайн
- Стилизация в тематике такси (желто-черная цветовая схема)
- Интуитивно понятная навигация
- Визуализация статистики с помощью диаграмм

## Обработка ошибок

Система обрабатывает следующие типы ошибок:
- 404 - Страница не найдена
- 403 - Доступ запрещен
- 500 - Внутренняя ошибка сервера
- Ошибки валидации форм
- Ошибки доступа к данным

Все ошибки отображаются в понятном виде с рекомендациями по их устранению.

## Автор

Фомина Марина Александровна
Группа: ПИ23-1
Учебное заведение: Финансовый университет при Правительстве РФ
Контакт: marinall11xx@gmail.com

Даты разработки: 30.10.2025 - 14.12.2025

## Лицензия

Проект разработан в учебных целях.

